# 정규화 (Normalization)

- 데이터베이스의 중복을 최소화하고 데이터 무결성을 향상시키기 위해 테이블 구조를 재구성하는 과정
- 데이터 삽입, 수정, 삭제 시 발생할 수 있는 이상 현상(Anomaly)을 방지하는 것이 주 목적

## 제1정규형 (1NF)

- 정의: 테이블의 모든 컬럼 값이 원자값(Atomic Value)이어야 함
- 즉, 하나의 컬럼에 여러 개의 값이 들어갈 수 없음

- 예시:
  - Before (1NF 위반): 한 컬럼에 여러 취미가 쉼표로 구분되어 저장됨
    | 학생 ID | 이름 | 수강과목 |
    |---|---|---|
    | 1 | 김민준 | 수학, 과학 |
    | 2 | 이서아 | 국어 |

  - After (1NF 만족): 각 행이 하나의 원자값만 갖도록 분리
    | 학생 ID | 이름 | 수강과목 |
    |---|---|---|
    | 1 | 김민준 | 수학 |
    | 1 | 김민준 | 과학 |
    | 2 | 이서아 | 국어 |

## 제2정규형 (2NF)

- 정의:
  1. 제1정규형을 만족해야 함
  2. 기본키가 복합키(Composite Key)일 경우, 모든 컬럼이 기본키 전체에 종속되어야 함 (부분 함수 종속 제거)

- 부분 함수 종속 (Partial Functional Dependency): 복합 기본키의 일부에만 종속되는 컬럼이 존재하는 상태

- 예시:
  - 기본키: (학생 ID, 과목 코드)
  - Before (2NF 위반): `과목명`은 `과목 코드`에만 종속되고, `성적`은 (학생 ID, 과목 코드) 전체에 종속됨
    | 학생 ID | 과목 코드 | 과목명 | 성적 |
    |---|---|---|---|
    | 101 | CS101 | 컴퓨터 개론 | A |
    | 101 | MA202 | 미적분학 | B |
    | 102 | CS101 | 컴퓨터 개론 | B |

    - `과목명`이 복합키의 일부인 `과목 코드`에만 종속되므로 부분 함수 종속 발생

  - After (2NF 만족): 부분 종속 관계를 별도의 테이블로 분리
    - 수강 테이블
      | 학생 ID | 과목 코드 | 성적 |
      |---|---|---|
      | 101 | CS101 | A |
      | 101 | MA202 | B |
      | 102 | CS101 | B |

    - 과목 테이블
      | 과목 코드 | 과목명 |
      |---|---|
      | CS101 | 컴퓨터 개론 |
      | MA202 | 미적분학 |

## 제3정규형 (3NF)

- 정의:
  1. 제2정규형을 만족해야 함
  2. 기본키가 아닌 모든 컬럼 간에는 서로 종속 관계가 없어야 함 (이행적 함수 종속 제거)

- 이행적 함수 종속 (Transitive Functional Dependency): A → B 이고 B → C 일 때, A → C 관계가 성립하는 경우 (A: 기본키, B, C: 일반 컬럼)

- 예시:
  - 기본키: 학생 ID
  - Before (3NF 위반): `지도교수`는 `학과`에 종속되고, `학과`는 기본키인 `학생 ID`에 종속됨 (학생 ID → 학과 → 지도교수)
    | 학생 ID | 학과 | 지도교수 |
    |---|---|---|
    | 201 | 컴퓨터공학 | 김교수 |
    | 202 | 소프트웨어 | 이교수 |
    | 203 | 컴퓨터공학 | 김교수 |

    - `지도교수`가 일반 컬럼인 `학과`에 종속되므로 이행적 함수 종속 발생

  - After (3NF 만족): 이행 종속 관계를 별도의 테이블로 분리
    - 학생 테이블
      | 학생 ID | 학과 |
      |---|---|
      | 201 | 컴퓨터공학 |
      | 202 | 소프트웨어 |
      | 203 | 컴퓨터공학 |

    - 학과 테이블
      | 학과 | 지도교수 |
      |---|---|
      | 컴퓨터공학 | 김교수 |
      | 소프트웨어 | 이교수 |

## BCNF (Boyce-Codd Normal Form)

- 제3정규형보다 강화된 정규형
- 모든 결정자(Determinant)가 후보키(Candidate Key)여야 한다는 조건을 만족해야 함
- 대부분의 3NF는 BCNF를 만족하지만, 복잡한 종속 관계에서는 아닐 수도 있음