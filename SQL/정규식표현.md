# 정규식 표현(Regular Expression)
문자열의 공통된 규칙을 보다 일반화 하여 표현하는 방법

## 1. 문자/숫자/특수기호를 지정하는 표현식

| 표현식 | 설명 |
| --- | --- |
| `\d` | 숫자 |
| `\D` | 숫자가 아닌 모든것 |
| `\w` | 글자(영어, 숫자, 한글) + `_` |
| `\W` | 글자가 아닌 모든 것(특수기호, 공백). `_`는 제외 |
| `\s` | 공백 문자(스페이스, 탭, 줄바꿈 등) |
| `\t` | 탭 |
| `\n` | 줄바꿈 |
| `[[:digit:]]` | 숫자 |
| `[[:alpha:]]` | 영문자 |
| `[[:alnum:]]` | 영문자 및 숫자 |
| `[[:punct:]]` | 특수기호. `_`포함 |

## 2. 반복 횟수를 지정하는 표현식

| 표현식 | 설명 |
| --- | --- |
| `?` | 0회 또는 1회 |
| `*` | 0회 이상 |
| `+` | 1회 이상 |
| `{n}` | n회. {3}은 3회 |
| `{n,}` | n회 이상 |
| `{n,m}` | n회 이상 m회 이하 |

## 3. 여러 패턴을 지정하는 표현식
`[ ]`는 한글자임 주의

| 표현식 | 설명 |
| --- | --- |
| `[ab]` | a 또는 b 한글자 |
| `[a-z]` | 영문 소문자 한글자 |
| `[A-Z]` | 영문 대문자 한글자 |
| `[A-z]` | 영문 한글자(대소구분X) |
| `[가-힣]` 또는 `[가-힝]` | 한글 한글자 |
| `[^ab]` | a와 b를 제외한 |

## 4. 기타

| 표현식 | 설명 |
| --- | --- |
| `.` | 엔터를 제외한 모든 한글자(숫자, 문자, 특수, 공백) |
| `^` | 시작 |
| `$` | 끝 |
| `a\|b` | a 또는 b |
| `()` | 그룹 지정 |
| `\` | escape character(일반 기호화) |

## REGEXP_SUBSTR

- 문법
    REGEXP_SUBSTR(대상, 패턴, [검색위치], [발견횟수] [옵션], [추출그룹])

- 특징
    - 검색위치 생략 시, 1
    - 발견횟수 생략 시, 1(1 이상의 값 전달 가능)

- 예제1
```sql
SELECT id
     , REGEXP_SUBSTR(id, '\d') AS 숫자
     , REGEXP_SUBSTR(id, '\w') AS 글자
     , REGEXP_SUBSTR(id, '\W') AS 글자아닌것
     , REGEXP_SUBSTR(id, '[[:punct:]]') AS 특수기호
FROM REGEXP1;
```
| ID | 숫자 | 글자 | 글자아닌것 | 특수기호|
| --- | --- | --- | --- | --- |
| a | NULL | a | NULL | NULL |
| abcba | NULL | a | NULL | NULL |
| a12_ba | 1 | a | NULL | _ |
| b9c~a | 9 | b | ~ | ~ |
| cc!ba가나다 | NULL | c | ! | ! |

- 예제2
```sql
SELECT id
     , REGEXP_SUBSTR(id, '[a-z]\d+') AS "영문-숫자필수"
     , REGEXP_SUBSTR(id, '[a-z]\d*') AS "영문-숫자선택"
FROM REGEXP1;
```
| ID | 영문-숫자필수 | 영문-숫자선택 |
|---|---|---|
| a | NULL | a |
| abcba | NULL | a |
| a12_ba | a12 | a12 |
| b9c~a | b9 | b9 |
| cc!ba가나다 | NULL | c |
